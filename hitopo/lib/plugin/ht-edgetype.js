!function(t){"use strict";var r="ht",u=t[r],A=Math,X=A.max,Q=A.min,P=A.abs,n=A.atan2,k=(A.cos,A.sin,A.ceil),G=u.Default,D=G.getInternal(),H=u.List,$=D.Mat,J=D.getNodeRect,y=D.intersectionLineRect,s=G.getDistance,h=G.setEdgeType,W="left",q="right",p="top",f="bottom",z="edge.type",x="edge.gap",b="edge.center",U="edge.extend",B=function(A,k){return J(A,k).width},C=function(w,g){return J(w,g).height},M=function(f,L){return D.getEdgeAgentPosition(f,L._40I,L.s("edge.source.position"),L.s("edge.source.offset.x"),L.s("edge.source.offset.y"),L.s("edge.source.anchor.x"),L.s("edge.source.anchor.y"))},a=function(M,j){return D.getEdgeAgentPosition(M,j._41I,j.s("edge.target.position"),j.s("edge.target.offset.x"),j.s("edge.target.offset.y"),j.s("edge.target.anchor.x"),j.s("edge.target.anchor.y"))},e=function(J,q){var l=J.s(z),_=J.getEdgeGroup();if(_){var j=0;if(_.eachSiblingEdge(function(c){q.isVisible(c)&&c.s(z)==l&&j++}),j>1)return J.s(x)*(j-1)/2}return 0},N=function(J,g){var y=J.s(z),K=J.isLooped();if(!J.getEdgeGroup())return K?J.s(x):0;var G,W=0,t=0,a=0;return J.getEdgeGroup().getSiblings().each(function(w){w.each(function(k){if(k._40I===J._40I&&k.s(z)==y&&g.isVisible(k)){var R=k.s(x);G?(t+=a/2+R/2,a=R):(G=k,a=R),k===J&&(W=t)}})}),K?t-W+a:W-t/2},_=function(z,g){var x=g.s("edge.corner.radius");return G.toRoundedCorner(z,x)};D.addMethod(u.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),h("boundary",function(Q,G,x,q){q||(G=-G);var o,Z=M(x,Q),R=a(x,Q),v=J(x,Q._40I),i=J(x,Q._41I),W=new $(n(R.y-Z.y,R.x-Z.x)),S=s(Z,R),K=Z.x,L=Z.y;return o=W.tf(0,G),Z={x:o.x+K,y:o.y+L},o=W.tf(S,G),R={x:o.x+K,y:o.y+L},o=y(Z,R,v),o&&(Z={x:o[0],y:o[1]}),o=y(Z,R,i),o&&(R={x:o[0],y:o[1]}),{points:new H([Z,R])}}),h("ripple",function(K,C,S,I){I||(C=-C);var h=M(S,K),D=a(S,K),i=s(h,D),V=Q(K.s("edge.offset"),i/2),E=K.s("edge.ripple.size"),W=K.s("edge.ripple.length"),e=K.s("edge.ripple.both"),X=K.s(b),O=K.s("edge.ripple.elevation"),z=new H,j=K.s("edge.ripple.straight")?null:new H,Z=new $(n(D.y-h.y,D.x-h.x));I||(O=-O),i-=2*V,W>0&&(E=k(i/W));var x=i/E;j&&j.add(1);for(var m=0;E>m;m++)j&&j.add(3),0===m?z.add({x:V+x*m,y:X?0:C}):z.add({x:V+x*m,y:C}),z.add({x:V+x*m+x/2,y:O+C}),e&&(O=-O);for(z.add({x:V+i,y:X?0:C}),m=0;m<z.size();m++){var F=Z.tf(z.get(m));F.x+=h.x,F.y+=h.y,z.set(m,F)}return{points:z,segments:j}}),h("h.v",function(Y,d,U){d=N(Y,U);var g=new H,l=Y.s(b),j=M(U,Y),f=j.x,I=j.y,X=a(U,Y),R=X.x,O=X.y,t=0,o=0,K=R-f,F=O-I;return l||(t=B(U,Y._40I)/2,o=C(U,Y._41I)/2),K>=0&&0>=F?(g.add({x:f+t,y:I+d}),g.add({x:R+d,y:I+d}),g.add({x:R+d,y:O+o})):0>=K&&F>=0?(g.add({x:f-t,y:I+d}),g.add({x:R+d,y:I+d}),g.add({x:R+d,y:O-o})):K>=0&&F>=0?(g.add({x:f+t,y:I+d}),g.add({x:R-d,y:I+d}),g.add({x:R-d,y:O-o})):(g.add({x:f-t,y:I+d}),g.add({x:R-d,y:I+d}),g.add({x:R-d,y:O+o})),_(g,Y)}),h("v.h",function(n,I,$){I=N(n,$);var w=new H,K=n.s(b),i=M($,n),P=i.x,f=i.y,d=a($,n),Y=d.x,Z=d.y,y=0,e=0,S=Y-P,X=Z-f;return K||(y=B($,n._41I)/2,e=C($,n._40I)/2),S>=0&&0>=X?(w.add({x:P+I,y:f-e}),w.add({x:P+I,y:Z+I}),w.add({x:Y-y,y:Z+I})):0>=S&&X>=0?(w.add({x:P+I,y:f+e}),w.add({x:P+I,y:Z+I}),w.add({x:Y+y,y:Z+I})):S>=0&&X>=0?(w.add({x:P-I,y:f+e}),w.add({x:P-I,y:Z+I}),w.add({x:Y-y,y:Z+I})):(w.add({x:P-I,y:f-e}),w.add({x:P-I,y:Z+I}),w.add({x:Y+y,y:Z+I})),_(w,n)}),h("ortho",function(w,n,t){var R=new H,L=w.s(b),f=w.s("edge.ortho"),v=w._40I,F=w._41I,e=M(t,w),W=e.x,j=e.y,y=a(t,w),U=y.x,i=y.y,h=U-W,D=i-j,A=L?0:B(t,v)/2,l=L?0:C(t,v)/2,x=L?0:B(t,F)/2,O=L?0:C(t,F)/2,g=(h-(A+x)*(h>0?1:-1))*f,Q=(D-(l+O)*(D>0?1:-1))*f;return P(h)<P(D)?h>=0&&0>=D?(R.add({x:W+n,y:j-l}),R.add({x:W+n,y:j+Q+n-l}),R.add({x:U+n,y:j+Q+n-l}),R.add({x:U+n,y:i+O})):0>=h&&D>=0?(R.add({x:W+n,y:j+l}),R.add({x:W+n,y:j+Q+n+l}),R.add({x:U+n,y:j+Q+n+l}),R.add({x:U+n,y:i-O})):h>=0&&D>=0?(R.add({x:W+n,y:j+l}),R.add({x:W+n,y:j+Q-n+l}),R.add({x:U+n,y:j+Q-n+l}),R.add({x:U+n,y:i-O})):(R.add({x:W+n,y:j-l}),R.add({x:W+n,y:j+Q-n-l}),R.add({x:U+n,y:j+Q-n-l}),R.add({x:U+n,y:i+O})):h>=0&&0>=D?(R.add({x:W+A,y:j+n}),R.add({x:W+g+n+A,y:j+n}),R.add({x:W+g+n+A,y:i+n}),R.add({x:U-x,y:i+n})):0>=h&&D>=0?(R.add({x:W-A,y:j+n}),R.add({x:W+g+n-A,y:j+n}),R.add({x:W+g+n-A,y:i+n}),R.add({x:U+x,y:i+n})):h>=0&&D>=0?(R.add({x:W+A,y:j+n}),R.add({x:W+g-n+A,y:j+n}),R.add({x:W+g-n+A,y:i+n}),R.add({x:U-x,y:i+n})):(R.add({x:W-A,y:j+n}),R.add({x:W+g-n-A,y:j+n}),R.add({x:W+g-n-A,y:i+n}),R.add({x:U+x,y:i+n})),_(R,w)}),h("flex",function(F,Y,Z){var d=new H,u=F.s("edge.flex")+e(F,Z),N=F.s(b),$=F._40I,s=F._41I,A=M(Z,F),V=A.x,T=A.y,y=a(Z,F),f=y.x,X=y.y,O=f-V,k=X-T,Q=N?0:B(Z,$)/2,w=N?0:C(Z,$)/2,o=N?0:B(Z,s)/2,j=N?0:C(Z,s)/2,h=O>0?u:-u,z=k>0?u:-u;return P(O)<P(k)?O>=0&&0>=k?(d.add({x:V+Y,y:T-w}),d.add({x:V+Y,y:T+z+Y-w}),d.add({x:f+Y,y:X-z+Y+j}),d.add({x:f+Y,y:X+j})):0>=O&&k>=0?(d.add({x:V+Y,y:T+w}),d.add({x:V+Y,y:T+z+Y+w}),d.add({x:f+Y,y:X-z+Y-j}),d.add({x:f+Y,y:X-j})):O>=0&&k>=0?(d.add({x:V+Y,y:T+w}),d.add({x:V+Y,y:T+z-Y+w}),d.add({x:f+Y,y:X-z-Y-j}),d.add({x:f+Y,y:X-j})):(d.add({x:V+Y,y:T-w}),d.add({x:V+Y,y:T+z-Y-w}),d.add({x:f+Y,y:X-z-Y+j}),d.add({x:f+Y,y:X+j})):O>=0&&0>=k?(d.add({x:V+Q,y:T+Y}),d.add({x:V+h+Y+Q,y:T+Y}),d.add({x:f-h+Y-o,y:X+Y}),d.add({x:f-o,y:X+Y})):0>=O&&k>=0?(d.add({x:V-Q,y:T+Y}),d.add({x:V+h+Y-Q,y:T+Y}),d.add({x:f-h+Y+o,y:X+Y}),d.add({x:f+o,y:X+Y})):O>=0&&k>=0?(d.add({x:V+Q,y:T+Y}),d.add({x:V+h-Y+Q,y:T+Y}),d.add({x:f-h-Y-o,y:X+Y}),d.add({x:f-o,y:X+Y})):(d.add({x:V-Q,y:T+Y}),d.add({x:V+h-Y-Q,y:T+Y}),d.add({x:f-h-Y+o,y:X+Y}),d.add({x:f+o,y:X+Y})),_(d,F)}),h("extend.east",function(R,g,Y){var i=new H,G=R.s(U)+e(R,Y),V=R.s(b),W=M(Y,R),D=W.x+(V?0:B(Y,R._40I)/2),p=W.y,T=a(Y,R),h=T.x+(V?0:B(Y,R._41I)/2),A=T.y,F=X(D,h)+G;return p>A?(i.add({x:D,y:p+g}),i.add({x:F+g,y:p+g}),i.add({x:F+g,y:A-g}),i.add({x:h,y:A-g})):(i.add({x:D,y:p-g}),i.add({x:F+g,y:p-g}),i.add({x:F+g,y:A+g}),i.add({x:h,y:A+g})),_(i,R)}),h("extend.west",function(A,w,S){var d=new H,k=A.s(U)+e(A,S),x=A.s(b),t=M(S,A),z=t.x-(x?0:B(S,A._40I)/2),D=t.y,P=a(S,A),W=P.x-(x?0:B(S,A._41I)/2),L=P.y,r=Q(z,W)-k;return D>L?(d.add({x:z,y:D+w}),d.add({x:r-w,y:D+w}),d.add({x:r-w,y:L-w}),d.add({x:W,y:L-w})):(d.add({x:z,y:D-w}),d.add({x:r-w,y:D-w}),d.add({x:r-w,y:L+w}),d.add({x:W,y:L+w})),_(d,A)}),h("extend.north",function(c,O,L){var l=new H,J=c.s(U)+e(c,L),m=c.s(b),i=M(L,c),z=i.x,T=i.y-(m?0:C(L,c._40I)/2),Y=a(L,c),v=Y.x,q=Y.y-(m?0:C(L,c._41I)/2),o=Q(T,q)-J;return z>v?(l.add({y:T,x:z+O}),l.add({y:o-O,x:z+O}),l.add({y:o-O,x:v-O}),l.add({y:q,x:v-O})):(l.add({y:T,x:z-O}),l.add({y:o-O,x:z-O}),l.add({y:o-O,x:v+O}),l.add({y:q,x:v+O})),_(l,c)}),h("extend.south",function(z,I,k){var J=new H,Z=z.s(U)+e(z,k),u=z.s(b),x=M(k,z),g=x.x,N=x.y+(u?0:C(k,z._40I)/2),o=a(k,z),P=o.x,q=o.y+(u?0:C(k,z._41I)/2),w=X(N,q)+Z;return g>P?(J.add({y:N,x:g+I}),J.add({y:w+I,x:g+I}),J.add({y:w+I,x:P-I}),J.add({y:q,x:P-I})):(J.add({y:N,x:g-I}),J.add({y:w+I,x:g-I}),J.add({y:w+I,x:P+I}),J.add({y:q,x:P+I})),_(J,z)});var S=function(E,n,z,b,u){if(b.sort(function(f,Z){var S=f.getSourceAgent()===n?f.getTargetAgent():f.getSourceAgent(),c=Z.getSourceAgent()===n?Z.getTargetAgent():Z.getSourceAgent(),m=S.p(),K=c.p();if(z===W||z===q){if(m.y>K.y)return 1;if(m.y<K.y)return-1}else{if(m.x>K.x)return 1;if(m.x<K.x)return-1}return G.sortFunc(f.getId(),Z.getId())}),u){for(var Z,U,w,V=E.getSourceAgent(),R=E.getTargetAgent(),s=0;s<b.size();s++){var l=b.get(s);l.getSourceAgent()===V&&l.getTargetAgent()===R||l.getTargetAgent()===V&&l.getSourceAgent()===R?(U||(U=new H),U.add(l,0)):U?(w||(w=new H),w.add(l)):(Z||(Z=new H),Z.add(l))}b.clear(),Z&&b.addAll(Z),U&&b.addAll(U),w&&b.addAll(w)}var C=b.indexOf(E),t=b.size(),T=E.s(x);return{side:z,index:C,size:t,offset:-T*(t-1)/2+T*C}},o=function(h,x,N,r,D){var n=x.s(z);return S(x,N,r,N.getAgentEdges().toList(function(e){return h.isVisible(e)&&e.s(z)===n}),D)},g=function(e,s){var E=e.getSourceAgent()===s?e.getTargetAgent():e.getSourceAgent(),k=s.p(),h=E.p(),H=h.x-k.x,t=h.y-k.y;return H>0&&P(t)<=H?q:0>H&&P(t)<=-H?W:t>0&&P(H)<=t?f:p},T=function(y,M,i){var U=M.s(z),o=g(M,i);return S(M,i,o,i.getAgentEdges().toList(function(n){return y.isVisible(n)&&n.s(z)===U&&g(n,i)===o}))},v=function(J,X){var C=J.getSourceAgent()===X,O=C?J.getTargetAgent():J.getSourceAgent(),P=X.p(),g=O.p();return C?P.y>g.y?p:f:P.x<g.x?q:W},E=function(u,Z,r){var n=Z.s(z),s=v(Z,r);return S(Z,r,s,r.getAgentEdges().toList(function(a){return u.isVisible(a)&&a.s(z)===n&&v(a,r)===s}),s===q||s===f)},F=function(J,B){var M=J.getSourceAgent()===B,i=M?J.getTargetAgent():J.getSourceAgent(),X=B.p(),C=i.p();return M?X.x<C.x?q:W:X.y>C.y?p:f},m=function(T,B,Q){var c=B.s(z),$=F(B,Q);return S(B,Q,$,Q.getAgentEdges().toList(function(V){return T.isVisible(V)&&V.s(z)===c&&F(V,Q)===$}),$===q||$===f)},R=function(z,h,i){var c=z.getSourceAgent(),F=z.getTargetAgent(),P=c.getId()>F.getId(),n=P?F:c,M=P?c:F,v=n.p(),E=M.p(),g=i(h,z,n),G=i(h,z,M),J=z.s(b),y=J?0:B(h,n)/2,s=J?0:B(h,M)/2,V=J?0:C(h,n)/2,t=J?0:C(h,M)/2,K=g.offset,o=G.offset,L=g.side,O=G.side,w=new H;return L===p?(w.add({x:v.x+K,y:v.y-V}),w.add({x:v.x+K,y:E.y+o}),O===W?w.add({x:E.x-s,y:E.y+o}):w.add({x:E.x+s,y:E.y+o})):L===f?(w.add({x:v.x+K,y:v.y+V}),w.add({x:v.x+K,y:E.y+o}),O===W?w.add({x:E.x-s,y:E.y+o}):w.add({x:E.x+s,y:E.y+o})):L===W?(w.add({x:v.x-y,y:v.y+K}),w.add({x:E.x+o,y:v.y+K}),O===f?w.add({x:E.x+o,y:E.y+t}):w.add({x:E.x+o,y:E.y-t})):L===q&&(w.add({x:v.x+y,y:v.y+K}),w.add({x:E.x+o,y:v.y+K}),O===f?w.add({x:E.x+o,y:E.y+t}):w.add({x:E.x+o,y:E.y-t})),P&&w.reverse(),_(w,z)};h("ortho2",function(X,G,r){var Y,v,g=X.s(b),o=X.s("edge.ortho"),Z=X.getSourceAgent(),i=X.getTargetAgent(),D=Z.getId()>i.getId(),L=D?i:Z,l=D?Z:i,z=L.p(),R=l.p(),K=T(r,X,L),d=T(r,X,l),F=g?0:B(r,L)/2,x=g?0:C(r,L)/2,Q=g?0:B(r,l)/2,N=g?0:C(r,l)/2,U=new H,t=K.offset,s=d.offset,M=K.side;return M===q?(Y=R.y>z.y?-t:t,v=z.x+F+(R.x-Q-z.x-F)*o,U.add({x:z.x+F,y:z.y+t}),U.add({x:v+Y,y:z.y+t}),U.add({x:v+Y,y:R.y+s}),U.add({x:R.x-Q,y:R.y+s})):M===W?(Y=R.y>z.y?-t:t,v=z.x-F-(z.x-F-R.x-Q)*o,U.add({x:z.x-F,y:z.y+t}),U.add({x:v-Y,y:z.y+t}),U.add({x:v-Y,y:R.y+s}),U.add({x:R.x+Q,y:R.y+s})):M===f?(Y=R.x>z.x?-t:t,v=z.y+x+(R.y-N-z.y-x)*o,U.add({x:z.x+t,y:z.y+x}),U.add({x:z.x+t,y:v+Y}),U.add({x:R.x+s,y:v+Y}),U.add({x:R.x+s,y:R.y-N})):M===p&&(Y=R.x>z.x?-t:t,v=z.y-x-(z.y-x-R.y-N)*o,U.add({x:z.x+t,y:z.y-x}),U.add({x:z.x+t,y:v-Y}),U.add({x:R.x+s,y:v-Y}),U.add({x:R.x+s,y:R.y+N})),D&&U.reverse(),_(U,X)},!0),h("flex2",function(c,d,U){var n,P=c.getSourceAgent(),k=c.getTargetAgent(),E=P.getId()>k.getId(),z=E?k:P,X=E?P:k,i=z.p(),M=X.p(),L=T(U,c,z),J=T(U,c,X),s=c.s(b),K=c.s("edge.flex")+(L.size-1)/2*c.s(x),m=s?0:B(U,z)/2,t=s?0:C(U,z)/2,S=s?0:B(U,X)/2,j=s?0:C(U,X)/2,N=new H,R=L.offset,A=J.offset,V=L.side;return V===q?(n=M.y>i.y?-R:R,N.add({x:i.x+m,y:i.y+R}),N.add({x:i.x+m+K+n,y:i.y+R}),N.add({x:M.x-S-K+n,y:M.y+A}),N.add({x:M.x-S,y:M.y+A})):V===W?(n=M.y>i.y?-R:R,N.add({x:i.x-m,y:i.y+R}),N.add({x:i.x-m-K-n,y:i.y+R}),N.add({x:M.x+S+K-n,y:M.y+A}),N.add({x:M.x+S,y:M.y+A})):V===f?(n=M.x>i.x?-R:R,N.add({x:i.x+R,y:i.y+t}),N.add({x:i.x+R,y:i.y+t+K+n}),N.add({x:M.x+A,y:M.y-j-K+n}),N.add({x:M.x+A,y:M.y-j})):V===p&&(n=M.x>i.x?-R:R,N.add({x:i.x+R,y:i.y-t}),N.add({x:i.x+R,y:i.y-t-K-n}),N.add({x:M.x+A,y:M.y+j+K-n}),N.add({x:M.x+A,y:M.y+j})),E&&N.reverse(),_(N,c)},!0),h("extend.north2",function(N,E,y){var R=N.getSourceAgent(),L=N.getTargetAgent(),t=R.getId()>L.getId(),k=t?L:R,I=t?R:L,P=k.p(),s=I.p(),v=o(y,N,k,p),w=o(y,N,I,p,!0),J=N.s(b),D=J?0:C(y,k)/2,h=J?0:C(y,I)/2,O=v.offset,d=w.offset,n=N.s(U)+(v.size-1)/2*N.s(x),u=Q(P.y-D,s.y-h)-n+(P.x<s.x?O:-O),m=new H;return m.add({x:P.x+O,y:P.y-D}),m.add({x:P.x+O,y:u}),m.add({x:s.x+d,y:u}),m.add({x:s.x+d,y:s.y-h}),t&&m.reverse(),_(m,N)},!0),h("extend.south2",function(Z,Q,a){var n=Z.getSourceAgent(),J=Z.getTargetAgent(),G=n.getId()>J.getId(),R=G?J:n,T=G?n:J,r=R.p(),L=T.p(),O=o(a,Z,R,f),m=o(a,Z,T,f,!0),N=Z.s(b),l=N?0:C(a,R)/2,W=N?0:C(a,T)/2,p=O.offset,u=m.offset,F=Z.s(U)+(O.size-1)/2*Z.s(x),D=X(r.y+l,L.y+W)+F+(r.x>L.x?p:-p),h=new H;return h.add({x:r.x+p,y:r.y+l}),h.add({x:r.x+p,y:D}),h.add({x:L.x+u,y:D}),h.add({x:L.x+u,y:L.y+W}),G&&h.reverse(),_(h,Z)},!0),h("extend.west2",function(t,$,u){var s=t.getSourceAgent(),v=t.getTargetAgent(),w=s.getId()>v.getId(),c=w?v:s,S=w?s:v,l=c.p(),Y=S.p(),i=o(u,t,c,p),E=o(u,t,S,p,!0),f=t.s(b),q=f?0:B(u,c)/2,T=f?0:B(u,S)/2,G=i.offset,h=E.offset,M=t.s(U)+(i.size-1)/2*t.s(x),y=Q(l.x-q,Y.x-T)-M+(l.y<Y.y?G:-G),C=new H;return C.add({x:l.x-q,y:l.y+G}),C.add({x:y,y:l.y+G}),C.add({x:y,y:Y.y+h}),C.add({x:Y.x-T,y:Y.y+h}),w&&C.reverse(),_(C,t)},!0),h("extend.east2",function(t,C,y){var d=t.getSourceAgent(),s=t.getTargetAgent(),L=d.getId()>s.getId(),P=L?s:d,F=L?d:s,i=P.p(),w=F.p(),j=o(y,t,P,p),N=o(y,t,F,p,!0),f=t.s(b),h=f?0:B(y,P)/2,D=f?0:B(y,F)/2,S=j.offset,g=N.offset,Z=t.s(U)+(j.size-1)/2*t.s(x),q=X(i.x+h,w.x+D)+Z+(i.y>w.y?S:-S),Q=new H;return Q.add({x:i.x+h,y:i.y+S}),Q.add({x:q,y:i.y+S}),Q.add({x:q,y:w.y+g}),Q.add({x:w.x+D,y:w.y+g}),L&&Q.reverse(),_(Q,t)},!0),h("v.h2",function(B,S,t){return R(B,t,E)},!0),h("h.v2",function(Q,e,_){return R(Q,_,m)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
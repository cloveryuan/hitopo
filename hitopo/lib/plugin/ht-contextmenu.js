!function(Z,t){"use strict";var v="ht",q=Z[v],Q="position",O="absolute",y="px",N="left",H="top",G="innerHTML",g="className",I="width",V="height",f="0",u="display",R="none",i="visibility",c="user-select",Y="margin",K="padding",x=null,F=q.Color,P=q.Default,A=P.getInternal(),n=Z.setTimeout,W=Z.setInterval,z=Z.clearTimeout,$=Z.clearInterval,b=Z.parseInt,r=P.isLeftButton,D=P.isDragging,S=P.startDragging,s=P.getDistance,k=P.isTouchable,X=F.widgetIconHighlight,w=F.widgetIconBorder,B=F.widgetIconGradient,L=function(){return document},J=function(b,e){return b.querySelectorAll(e)},E=function(U){var N=L().createElement(U);return"ul"===U&&(h(N,Q,"relative"),h(N,Y,f),h(N,K,f),h(N,"list-style",R),h(N,"box-sizing","border-box"),h(N,"-moz-box-sizing","border-box"),h(N,u,"inline-block"),h(N,"vertical-align","text-bottom"),h(N,"border","1px solid "+P.contextMenuBorderColor),h(N,"box-shadow","0 0 16px 1px "+P.contextMenuShadowColor),h(N,"overflow","hidden"),P.contextMenuBorderRadius&&h(N,"border-radius",P.contextMenuBorderRadius+y)),N},C=function(r){var N=r.touches[0];return N?N:r.changedTouches[0]},M=function(){return E("div")},U=function(){return E("canvas")},h=function(C,g,r){C.style.setProperty(g,r,x)},T=function(f,l,B){P.def(q.widget[f],l,B)},e=function(S,x){S.appendChild(x)},d=function(y,Y){y.removeChild(Y)},o=function(f,e,t,N){f.addEventListener(e,t,!!N)},a=function(g,d,K,G){g.removeEventListener(d,K,!!G)};A.addMethod(P,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:w},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:X}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:w},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:X,gradient:P.imageGradient,gradientColor:B,background:X}]},contextMenuLabelFont:(k?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var m=function(l){var C=this,P=l._view;if(C.$11b=l,C.addListeners(),o(P,"contextmenu",function(x){x.preventDefault()}),!k){var i=C.$37b=C.$36b.bind(C);o(P,"mouseover",i),o(P,"mouseout",i)}};P.def(m,t,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(c){if(P.preventDefault(c),r(c)){for(var Y=this,f=Y.$11b,o=Y.getView(),U=o.children,N=0;N<U.length;N++){var E=U[N],t=E.$24b,p=E.$25b;if(t&&t.contains(c.target))return f.scrollUp(E),Y.$28b=n(function(){Y.$29b=W(function(){f.scrollUp(E)},100)},500),S(Y,c),void 0;if(p&&p.contains(c.target))return f.scrollDown(E),Y.$28b=n(function(){Y.$29b=W(function(){f.scrollDown(E)},100)},500),S(Y,c),void 0}k&&(c=C(c)),Y.$30b={x:c.pageX,y:c.pageY}}},handle_mousedown:function(B){this.handle_touchstart(B)},handle_touchend:function(D){if(r(D)){var z=this,M=z.$30b,I=k?{x:C(D).pageX,y:C(D).pageY}:{x:D.pageX,y:D.pageY};if(!M||s(M,I)>1)return delete z.$30b,void 0;for(var i=z.getView(),S=z.$11b,o=D.target,c=x,n=x,_=S._items,Y=i.$26b,K=0;K<Y.length;K++)if(n=Y[K],n.contains(o)){c=n.getAttribute("data-id");break}if(c&&_){var Z=S.$17b(_,function(x){return x._id===c});if(Z){var H=!1;Z.disabled instanceof Function?H=Z.disabled.call(S,Z):Z.disabled===!0&&(H=!0),H||(Z.items?k&&z.$36b(n,!0):S.$1b(Z,D))}}delete z.$30b}},$36b:function(r,T){if(!D()){var $,R=this,k=R.$11b,K=R.getView(),_=k.$20b||K.children[0],U=k.$19b,X=K.$26b,q=K.children,j=r.target,c=K.getBoundingClientRect(),b=P.getWindowInfo(),p=b.width,n=b.height,z=function(a){for(var G=0;G<q.length;G++){var L=q[G],R=new RegExp(a+"$"),s=L[g];if(s&&(R.test(s)||s.indexOf(a+" ")>=0))return L}},l=function(j){for(var J=0;J<X.length;J++){var q=X[J],R=new RegExp(j+"$"),c=q[g];if(c&&(R.test(c)||c.indexOf(j+" ")>=0))return q}},e=function(O){var W=l("menu-item"+O.$45b),K=W.getBoundingClientRect(),E=K.top-c.top,d=K.left-c.left;h(O,H,E+y),h(O,N,d+K.width+y);var w=O.getBoundingClientRect(),L=w.top,R=w.left,U=w.height,Y=w.width,T=L+U+2,B=R+Y+2;T>n&&h(O,H,E+n-T+y),B>p&&h(O,N,d-Y+y)};if(T)$=r;else{if("mouseover"===r.type){for(var I=0;I<X.length;I++){var W=X[I];if(W.contains(j)){$=W;break}}if(!$&&U){var t=U.parentNode,C=z("submenu"+U.getAttribute("data-id"));(C&&C.contains(j)||t&&t.contains(j))&&($=U)}}else if("mouseout"===r.type){for(var O=!1,F=r.relatedTarget,I=0;I<q.length;I++){var J=q[I];if("hidden"!==J.style.visibility&&J.contains(F)){O=!0;break}}if(O)return}!$&&_&&($=l("menu-item"+(_.$45b||"NaN")))}if($!=U){if(U)for(var v=U;v;){if(v[g]=v[g].replace(" menu-item-hover",""),v[g].indexOf("disabled")<0){var V=k.getItemByProperty("_id",v.getAttribute("data-id"));null!=V.background?V.background instanceof Function?h(v,"background-color",V.background.call(k,V)):h(v,"background-color",V.background):h(v,"background-color",P.contextMenuBackground),h(v,"color",P.contextMenuLabelColor)}var o=z("submenu"+v.getAttribute("data-id"));o&&h(o,i,"hidden");var w=v.parentNode;v=l("menu-item"+(w.$45b||"NaN"))}if($){for(var E=$,G=[];E;){E[g]+=" menu-item-hover",E[g].indexOf("disabled")<0&&(h(E,"background-color",P.contextMenuHoverBackground),h(E,"color",P.contextMenuHoverLabelColor));var d=z("submenu"+E.getAttribute("data-id"));d&&(h(d,i,"visible"),G.push(d));var w=E.parentNode;E=l("menu-item"+(w.$45b||"NaN"))}G.reverse(),G.forEach(function(R){e(R)})}}k.$19b=$,k.$20b=$?$.parentNode:K.children[0]}},handle_mouseup:function(L){this.handle_touchend(L)},handleWindowTouchEnd:function(){var _=this;_.$28b!=x&&(z(_.$28b),delete _.$28b),_.$29b!=x&&($(_.$29b),delete _.$29b),delete _.$34b,delete _.$30b,delete _.$35b},handleWindowMouseUp:function(c){this.handleWindowTouchEnd(c)},handle_mousemove:function(v){this.handle_touchmove(v)},handle_touchmove:function(X){if(!D()&&r(X)){for(var L=this,T=L.getView().children,u=x,Z=0;Z<T.length;Z++){var V=T[Z];if(V.contains(X.target)){u=V;break}}var Q=L.$30b,M=k?{x:C(X).pageX,y:C(X).pageY}:{x:X.pageX,y:X.pageY};u&&Q&&s(Q,M)>2&&(S(L,X),L.$34b=u,L.$35b=u.$18b)}},handleWindowTouchMove:function(o){o.preventDefault();var $=this,F=$.$11b,V=$.$34b,m=$.$35b,y=$.$30b;if(y&&V){var D=k?{x:C(o).pageX,y:C(o).pageY}:{x:o.pageX,y:o.pageY},X=D.y-y.y;X>0?F.scrollUp(V,V.$18b-(m-X)):F.scrollDown(V,m-X-V.$18b)}},handleWindowMouseMove:function(J){this.handleWindowTouchMove(J)},$10b:function(S,A){S.preventDefault();for(var s=this,p=s.getView().children,k=x,Z=0;Z<p.length;Z++){var w=p[Z];if(w.contains(S.target)){k=w;break}}if(k){var J=this.$11b,$=J.getRowHeight();Math.abs(A)>.05&&(A>0?J.scrollUp(k,A*$):0>A&&J.scrollDown(k,-A*$))}},handle_mousewheel:function(V){this.$10b(V,V.wheelDelta/40)},handle_DOMMouseScroll:function(P){this.$10b(P,-P.detail)},$44b:function(j){this.getView().contains(j.target)||this.$11b.hide()},$41b:function(J){this.$11b.show(J)},$4b:function(a,X){var A=this.$11b;if(X=X||A._items,X&&X.length&&a.keyCode){var I=[a.keyCode];a.shiftKey&&I.push(16),a.ctrlKey&&I.push(17),a.altKey&&I.push(18),/mac/.test(Z.navigator?Z.navigator.userAgent.toLowerCase():"")?a.metaKey&&I.push(17):a.metaKey&&I.push(91),I.sort();var O=I.join(),d=A.$17b(X,function(s){if(s.key){var g=s.key.slice(0);return g.sort(),O===g.join()}});if(d){d.preventDefault!==!1&&a.preventDefault();var P=!1;d.disabled instanceof Function?P=d.disabled.call(A,d):d.disabled===!0&&(P=!0),P||A.$1b(d,a)}}},$39b:function(P){var K=this,X=C(P);K.$32b={x:X.pageX,y:X.pageY}},$38b:function(e){var V=this,Z=C(e);V.$31b={x:Z.pageX,y:Z.pageY},V.$33b=n(function(){V.$31b&&(V.$32b?s(V.$31b,V.$32b)<10&&V.$11b.show(e):V.$11b.show(e)),delete V.$33b,delete V.$31b,delete V.$32b},600)},$40b:function(){var d=this;d.$33b!=x&&(z(d.$33b),delete d.$33b,delete d.$31b,delete d.$32b)}}),q.widget.ContextMenu=function(W){var B=this,w=B._view=A.createView(null,B);w[g]="ht-widget-contextmenu",B.setItems(W),B.$13b=new m(B),h(w,"font",P.contextMenuLabelFont),h(w,Q,O),h(w,"cursor","default"),h(w,"-webkit-"+c,R),h(w,"-moz-"+c,R),h(w,"-ms-"+c,R),h(w,c,R),h(w,"box-sizing","border-box"),h(w,"-moz-box-sizing","border-box"),P.baseZIndex!=x&&h(w,"z-index",b(P.baseZIndex)+2+""),B.$3b=function(Q){B.$13b.$4b(Q)}},T("ContextMenu",t,{$5b:0,_items:x,$21b:x,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var v=this,r=v._enableGlobalKey;r===!1&&(o(L(),"keydown",v.$3b),v._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,a(L(),"keydown",this.$3b)},setItems:function(s){this._items=s},getItems:function(){return this._items},setVisibleFunc:function(F){this.$16b=F},setLabelMaxWidth:function(I){this.$43b=I},$1b:function(F,P){var M=this;if("check"===F.type)F.selected=!F.selected;else if("radio"===F.type){var J=F.groupId;M.$17b(M._items,function(y){y.groupId===J&&(y.selected=!1)}),F.selected=!0}if(M.hide(),F.action)F.action.apply(F.scope||M,[F,P]);else if(F.href){var U=F.linkTarget||"_self";Z.open(F.href,U)}},getItemById:function(X){return this.getItemByProperty("id",X)},setItemVisible:function(E,Q){var m=this.getItemById(E);m&&(m.visible=Q)},getItemByProperty:function(b,H,r){var L=this;if(r=r||L._items,!r||0===r.length)return x;var m=L.$17b(r,function(I){return I[b]===H});return m||x},scrollUp:function(G,H){var I=this;if(H=H==x?20:H,H=b(H),0!==H){var K=0;G.$18b>H&&(K=G.$18b-H),I.$42b(G,K),G.scrollTop=K,G.$18b=K}},scrollDown:function(S,f){var r=this;if(f=f==x?20:f,f=b(f),0!==f){var h=S.$22b,C=S.$23b,F=h-C;C+S.$18b+f<h&&(F=S.$18b+f),r.$42b(S,F),S.scrollTop=F,S.$18b=F}},$42b:function(I,m){m=m==x?I.$18b:m;var H=I.$24b,B=I.$25b;H&&(h(H,"top",m+y),0==m?h(H,u,R):h(H,u,"block")),B&&(h(B,"bottom",-m+y),m==I.$22b-I.$23b?h(B,u,R):h(B,u,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(e,E){for(var u=0;u<e.length;u++){var m=e[u];if(E(m))return m;if(m.items){var d=this.$17b(m.items,E);if(d)return d}}},$2b:function(L,m){for(var c=this,r=0;r<L.length;r++){c.$5b++;var S=L[r];if(S.visible!==!1&&!(P.isFunction(S.visible)&&S.visible()===!1||c.$16b&&!c.$16b.call(c,S))){var o=E("li"),W=c.$5b+"";if(h(o,"white-space","nowrap"),h(o,u,"block"),"separator"===S||S.separator===!0){var Z=M();Z[g]="separator",h(Z,V,P.contextMenuSeparatorWidth+y),h(Z,"background",P.contextMenuSeparatorColor),e(o,Z)}else{S._id=W,o.setAttribute("data-id",W);var d=E("span"),l=E("span"),J=U(),H=M();if(h(d,u,"inline-block"),h(d,V,"1.2em"),h(l,u,"inline-block"),h(l,V,"1.2em"),h(l,"line-height","1.2em"),J[g]="prefix",h(J,u,"inline-block"),h(J,I,"1em"),h(J,V,"1em"),h(J,"vertical-align","middle"),h(J,Y,"0 0.2em"),"check"===S.type&&S.selected?J[g]+=" check-prefix":"radio"===S.type&&S.selected&&(J[g]+=" radio-prefix"),e(o,J),S.icon){var s=U();s[g]="contextmenu-item-icon",h(s,u,"inline-block"),h(s,V,"1.2em"),h(s,I,"1.2em"),h(s,"margin-right","0.2em"),h(s,"float","left"),s.$50b=S.icon,s._item=S,e(d,s)}if(l[G]=S.label,e(d,l),e(o,d),H[g]="suffix",h(H,u,"inline-block"),h(H,"margin-left","1em"),h(H,"margin-right","0.4em"),h(H,"text-align","right"),h(H,"font-size","75%"),S.items&&(H[G]=P.contextMenuSubmenuMark),S.suffix&&(H[G]=S.suffix),e(o,H),o[g]="menu-item menu-item"+W,null!=S.background?S.background instanceof Function?h(o,"background-color",S.background.call(c,S)):h(o,"background-color",S.background):h(o,"background-color",P.contextMenuBackground),h(o,"color",P.contextMenuLabelColor),h(o,K,"3px 0"),S.disabled instanceof Function){var z=S.disabled.call(c,S);z&&(o[g]+=" disabled",h(o,"color",P.contextMenuDisabledLabelColor))}else S.disabled&&(o[g]+=" disabled",h(o,"color",P.contextMenuDisabledLabelColor));if(S.items){c.$21b||(c.$21b=new q.List);var _=E("ul");_[g]="submenu"+W,_.$45b=W,h(_,i,"hidden"),h(_,Q,O),e(c._view,_),c.$21b.add(_),c.$2b(S.items,_)}}e(m,o)}}},rebuild:function(){var j=this,k=j._items,B=j._view;if(B&&(B[G]="",j.$21b=x,j.$5b=0,j.$19b=x,j.$20b=x,B.$26b=x,k&&0!==k.length)){var H=E("ul",j._r);e(B,H),j.$2b(k,H)}},addTo:function(K){if(K){var g=this,w=g.$13b;if(g.$12b=K,g.$9b=function(G){w.$44b(G)},g.$27b=function(s){w.$41b(s)},k){var q=g.$6b=function(K){w.$38b(K)},t=g.$7b=function(P){w.$39b(P)},Y=g.$8b=function(k){w.$40b(k)};o(K,"touchstart",q,!0),o(K,"touchmove",t),o(K,"touchend",Y)}else o(K,"contextmenu",g.$27b)}},showOnView:function(t,A,k){t=t.getView?t.getView():t;var _=P.getWindowInfo(),R=t.getBoundingClientRect();this.show(R.left+_.left+A,R.top+_.top+k)},show:function(d,R,r){var F=this,r=r==x?!0:!1,j=F._view;if(j){if(F.invalidate(),1===arguments.length){var m=d;if(k){var _=C(m);d=_.pageX,R=_.pageY}else d=m.pageX,R=m.pageY}var U=P.getWindowInfo(),b=U.width,Z=U.height,D=U.left,i=U.top,z={pageX:d,pageY:R,clientX:d-D,clientY:R-i,target:1,originEvent:m},E=z.clientX,X=z.clientY,t=function(v){v.style.height=Z-6+y;var p=M(),s=M(),o=function(N){h(N,Q,O),h(N,"text-align","center"),h(N,I,"100%"),h(N,"font-size",10+y),h(N,"padding","2px 0"),h(N,"border","0px solid "+P.contextMenuScrollerBorderColor),h(N,"background-color",P.contextMenuScrollerColor1),N.style.backgroundImage="-webkit-linear-gradient(top, "+P.contextMenuScrollerColor1+", "+P.contextMenuScrollerColor2+")",N.style.backgroundImage="linear-gradient(to bottom, "+P.contextMenuScrollerColor1+", "+P.contextMenuScrollerColor2+")"};p[g]="menu-arrow-item menu-arrow-item-top",s[g]="menu-arrow-item menu-arrow-item-bottom",o(p),h(p,"top",f),h(p,"left",f),h(p,"border-bottom-width",1+y),p[G]="▲",o(s),h(s,"bottom",f),h(s,"left",f),h(s,"border-top-width",1+y),s[G]="▼",v.$24b=p,v.$25b=s,v.$18b=v.scrollTop,v.$22b=v.scrollHeight,v.$23b=v.clientHeight,e(v,p),e(v,s),F.$42b(v)};F.beforeShow&&F.beforeShow(z);var v=F._items;if(v&&(m&&m.preventDefault(),v.length)){F.rebuild(),P.appendToScreen(j),j.$26b=J(j,".menu-item");var l=j.children[0];l.offsetHeight>Z&&t(l);var Y=X+(r?1:0),n=E+(r?1:0),K=function(i){for(var _=0,n=0,Y=0,z=F.$43b;Y<i.children.length;Y++){var R=i.children[Y];if(R.getAttribute("data-id")){var t=R.children[1],v=R.children[2],U=t.children;if(z){var C=U[0];U.length>1&&(C=U[1]),C.offsetWidth>z&&(C[G]="<marquee scrollamount='3'>"+C[G]+"</marquee>",C.children[0].style.verticalAlign="text-bottom",h(C,I,z+y),h(C,u,"inline-block"))}var m=t.offsetWidth,r=v.offsetWidth;m>_&&(_=m),r>n&&(n=r)}}for(Y=0;Y<i.children.length;Y++){var R=i.children[Y];if(R.getAttribute("data-id")){var t=R.children[1],v=R.children[2],b=t.children[0],e=t.children[1];!e&&b.style.width&&h(b,I,_+y),h(t,I,_+y),h(v,I,n+y)}}};K(l);var W=X+3+j.offsetHeight,$=E+3+j.offsetWidth;W>Z?h(j,H,Y-(W-Z)+i+y):h(j,H,Y+i+y),$>b?h(j,N,n-($-b)+D+y):h(j,N,n+D+y);var s=F.$21b;s&&s.each(function(J){K(J),J.offsetHeight>Z&&t(J)}),F.$9b&&o(L(),k?"touchstart":"mousedown",F.$9b,!0),F.afterShow&&F.afterShow(z),F.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=x:!1},getRelatedView:function(){return this.$12b},hide:function(){var m=this,t=m._view;t&&t.parentNode&&(d(t.parentNode,t),a(L(),k?"touchstart":"mousedown",m.$9b,!0),m.afterHide&&m.afterHide())},dispose:function(){var Y=this,P=Y.$12b,f=Y._view;f&&(f.parentNode&&d(f.parentNode,f),Y.disableGlobalKey(),P&&(k?(a(P,"touchstart",Y.$6b,!0),a(P,"touchmove",Y.$7b),a(P,"touchend",Y.$8b)):a(P,"contextmenu",Y.$27b)),Y._view=Y._items=Y.$21b=Y.$19b=Y.$12b=Y.beforeShow=Y.afterShow=Y.afterHide=Y.$9b=Y.$3b=Y.$6b=Y.$7b=Y.$8b=Y.$27b=x)},$46b:function(r,k,B,s,z){var t=A.initContext(r);A.translateAndScale(t,0,0,1),t.clearRect(0,0,B,s),P.drawStretchImage(t,P.getImage(k),"fill",0,0,B,s,z,this),t.restore()},$47b:function(){var R,m,T,D=this,x=D._view;if(D.isShowing()){var S=J(x,".check-prefix");for(T=0;T<S.length;T++){var h=S[T];R=h.clientWidth,m=h.clientHeight,h.$48b=R,h.$49b=m,A.setCanvas(h,R,m)}var y=J(x,".radio-prefix");for(T=0;T<y.length;T++){var z=y[T];R=z.clientWidth,m=z.clientHeight,z.$48b=R,z.$49b=m,A.setCanvas(z,R,m)}var M=J(x,".contextmenu-item-icon");for(T=0;T<M.length;T++){var w=M[T];R=w.clientWidth,m=w.clientHeight,w.$48b=R,w.$49b=m,A.setCanvas(w,R,m)}}},validateImpl:function(){var n,d,r,V=this,m=V._view;if(V.isShowing()){var $=J(m,".check-prefix");for(r=0;r<$.length;r++){var G=$[r];n=G.$48b,d=G.$49b,n&&d&&V.$46b(G,P.contextMenuCheckIcon,n,d)}var S=J(m,".radio-prefix");for(r=0;r<S.length;r++){var K=S[r];n=K.$48b,d=K.$49b,n&&d&&V.$46b(K,P.contextMenuRadioIcon,n,d)}var q=J(m,".contextmenu-item-icon");for(r=0;r<q.length;r++){var w=q[r];n=w.$48b,d=w.$49b,n&&d&&V.$46b(w,P.getImage(w.$50b),n,d,w._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
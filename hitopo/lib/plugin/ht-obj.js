!function(z,b,t){"use strict";var W="ht",$=z[W],M=null,L=Math,e=L.abs,j=L.max,w=Number.MAX_VALUE,V=$.Default,B=V.getInternal(),l=V.clone,a=B.vec3TransformMat4,X=B.appendArray,q=function(){var S=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,A=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,k=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,W=function(V,W){return W=parseInt(W),W>=0?V[W-1]:V[W+V.length]},F=function(F,q,B,y,H,g){if(F.vs){var A=W(q,y),n=W(q,H),R=W(q,g),z=B.matrix,f=F.vs;if(B.flipFace){var Q=n;n=R,R=Q}z?(X(f,a(l(A),z)),X(f,a(l(n),z)),X(f,a(l(R),z))):(X(f,A),X(f,n),X(f,R))}},c=function(F,z,k,v,C,T){if(F.vs){var m=W(z,v),j=W(z,C),Z=W(z,T),a=k.flipY;if(k.flipFace){var D=j;j=Z,Z=D}F.uv.push(m[0],a?1-m[1]:m[1],j[0],a?1-j[1]:j[1],Z[0],a?1-Z[1]:Z[1])}},z=function(N,A,r,k,y,M){if(N.vs){var i=W(A,k),L=W(A,y),B=W(A,M),b=r.normalMatrix,d=N.ns;if(r.flipFace){var J=L;L=B,B=J}b?(X(d,a(l(i),b)),X(d,a(l(L),b)),X(d,a(l(B),b))):(X(d,i),X(d,L),X(d,B))}},h=function(W,T,I,H,d,u,Y,g){var b=H&&H.length&&g;u[3]===t?(F(W,T,d,u[0],u[1],u[2]),Y&&c(W,I,d,Y[0],Y[1],Y[2]),b&&z(W,H,d,g[0],g[1],g[2])):(F(W,T,d,u[0],u[1],u[3]),F(W,T,d,u[1],u[2],u[3]),Y&&(c(W,I,d,Y[0],Y[1],Y[3]),c(W,I,d,Y[1],Y[2],Y[3])),b&&(z(W,H,d,g[0],g[1],g[3]),z(W,H,d,g[1],g[2],g[3])))},P=function(p,h,U,D){var M,J,m,I,a,L,d,n=w,C=w,q=w,$=-w,y=-w,B=-w;for(M in p)for(L=p[M].vs,d=L.length,J=0;d>J;J+=3)m=L[J+0],I=L[J+1],a=L[J+2],n>m&&(n=m),C>I&&(C=I),q>a&&(q=a),m>$&&($=m),I>y&&(y=I),a>B&&(B=a);if(U){var P=n+($-n)/2,u=C+(y-C)/2,T=q+(B-q)/2;for(M in p)for(L=p[M].vs,d=L.length,J=0;d>J;J+=3)L[J+0]-=P,L[J+1]-=u,L[J+2]-=T}var c,s,V;U?(c=$-n,s=y-C,V=B-q):(c=2*j(e(n),e($)),s=2*j(e(C),e(y)),V=2*j(e(q),e(B))),D.rawS3=[c,s,V];for(M in p){if(L=p[M].vs,h)for(d=L.length,J=0;d>J;J+=3)c&&(L[J+0]/=c),s&&(L[J+1]/=s),V&&(L[J+2]/=V);p[M].rawS3=D.rawS3}};return function(U,q,E){if(!U)return M;B.isString(q)&&(q=Q(q)),E||(E={}),E.flipY==M&&(E.flipY=!0),(E.s3||E.r3||E.t3||E.mat)&&(E.matrix=B.createWorldMatrix(E.mat,E.s3,E.r3,E.rotationMode,E.t3));var p,K,W,O,f,o,s=[],a=[],D=E.ignoreNormal?M:[],v=E.reverseFlipMtls,r={vs:[],uv:[],ns:D?[]:M},X={htdefault:r},i=U.split("\n"),b=0;for(D&&E.matrix&&(E.normalMatrix=B.createNormalMatrix(E.matrix));b<i.length;b++)if(K=i[b].trim(),0!==K.length&&"#"!==K.charAt(0))if(W=S.exec(K))s.push([parseFloat(W[1]),parseFloat(W[2]),parseFloat(W[3])]);else if(W=A.exec(K))a.push([parseFloat(W[1]),parseFloat(W[2])]);else if(D&&(W=k.exec(K)))E.flipFace?D.push([parseFloat(-W[1]),parseFloat(-W[2]),parseFloat(-W[3])]):D.push([parseFloat(W[1]),parseFloat(W[2]),parseFloat(W[3])]);else if("f"===K[0]){var n=K.split(/\s+/);if(n.length<4)continue;var H,p,d,m=[],Y=[],Z=[];for(p=1,d=n.length;d>p;p++)H=n[p].split("/"),m.push(parseInt(H[0],10)),H.length>1&&H[1].length>0&&Z.push(parseInt(H[1],10)),H.length>2&&H[2].length>0&&Y.push(parseInt(H[2],10));for(p=0,d=m.length-2;d>p;p++)h(r,s,a,D,E,[m[0],m[p+1],m[p+2]],Z.length?[Z[0],Z[p+1],Z[p+2]]:M,Y.length?[Y[0],Y[p+1],Y[p+2]]:M)}else if(/^usemtl /.test(K)&&(O=K.substring(7).trim(),!(r=X[O]))){if(r={name:O,vs:[],uv:[],ns:D?[]:M},E.ignoreMtls&&E.ignoreMtls.indexOf(O)>=0&&delete r.vs,(E.reverseFlip||"*"===v||v&&v.indexOf(O)>=0)&&(r.reverseFlip=!0),q&&(f=q[O],f&&(E.ignoreColor||(r.color=f.kd),!E.ignoreTransparent&&f.d>0&&f.d<1&&(r.transparent=!0,r.opacity=f.d),!E.ignoreImage&&(o=f.map_kd)))){o=o.split(" ");var L=-1;for(p=0;p<o.length;p++)"-o"===o[p]?(r.uvOffset=[parseFloat(o[p+1]),parseFloat(o[p+2])],p+=2,L=p):"-s"===o[p]&&(r.uvScale=[parseFloat(o[p+1]),parseFloat(o[p+2])],p+=2,L=p);r.image=(E.prefix||"")+o.splice(L+1).join(" ")}X[O]=r}var l=[];for(var j in X){var $=X[j].vs;$&&0!==$.length||l.push(j)}l.forEach(function(Y){delete X[Y]}),P(X,E.cube,E.center,E);var u=E.shape3d;if(u){var c=[];for(var O in X){var r=X[O];c.rawS3=r.rawS3,c.push(r)}V.setShape3dModel(u,c)}return X}}(),Q=function(t){var k={};if(t)for(var d,W,T,h,l,u,z=t.split("\n"),E=/\s+/,_=0;_<z.length;_++)W=z[_].trim(),0!==W.length&&"#"!==W.charAt(0)&&(T=W.indexOf(" "),h=(T?W.substring(0,T):W).toLowerCase(),l=(T?W.substring(T+1):"").trim(),"newmtl"===h?k[l]=d={name:l}:d&&("ka"===h||"kd"===h||"ks"===h?(u=l.split(E,3),d[h]=[parseFloat(u[0]),parseFloat(u[1]),parseFloat(u[2]),1]):d[h]="ns"===h||"d"===h?parseFloat(l):l));return k};B.addMethod(V,{loadObj:function(O,e,A){A=A||{},V.xhrLoad(e?[O,e]:[O],function(Y){var j,e=A.finishFunc,s=A.shape3d,l=Y?q(Y[0],Y[1],A):null;if(l){if(s)j=V.getShape3dModel(s);else{j=[];for(var L in l){var Q=l[L];j.rawS3=Q.rawS3,j.push(Q)}}e&&e(l,j,j.rawS3)}else e&&e(null)},A)},parseObj:function(y,l,W){return q(y,l,W)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
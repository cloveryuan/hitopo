!function(W,z){"use strict";var X="ht",A=X+".graph.",j=W[X],i=j.graph,b=j.Default,d=j.Color,y=null,Q="px",o=b.getInternal(),V=o.getPinchDist,U=b.preventDefault,L=b.getTouchCount,e=b.startDragging;o.addMethod(b,{overviewBackground:d.widgetBackground,overviewMaskBackground:d.transparent,overviewContentBorderColor:d.widgetBorder,overviewContentBackground:d.background},!0),i.Overview=function(n){var Q=this,c=Q._view=o.createView(1,Q);Q._canvas=o.createCanvas(c),c.style.background=b.overviewBackground,c.appendChild(Q._mask=o.createDiv()),Q.setGraphView(n),Q.addListeners()},b.def(A+"Overview",z,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate"],_autoUpdate:!0,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:b.overviewMaskBackground,_contentBorderColor:b.overviewContentBorderColor,_contentBackground:b.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(D){var W=this;if(W.gv!==D){var u=W.gv;W.gv=D,u&&(u.removeViewListener(W.handleGraphViewChanged,W),u.ump(W.handleGraphViewPropertyChanged,W)),D&&(D.addViewListener(W.handleGraphViewChanged,W),D.mp(W.handleGraphViewPropertyChanged,W)),W.fp("graphView",u,D),W.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(U){this._autoUpdate&&"validate"===U.kind&&this.redraw()},handleGraphViewPropertyChanged:function(v){"canvasBackground"===v.property&&this.redraw()},redraw:function(){var B=this;B._redraw||(B._redraw=1,B.iv(50))},validateImpl:function(){var s=this,t=s.gv,F=s._canvas,W=s.getWidth(),B=s.getHeight(),J=s._redraw;if(t){var r=s._mask,e=r.style,z=t.getViewRect(),S=t.getScrollRect(),m=S.x,G=S.y,R=S.width,f=S.height,d=s._rate=Math.max(R/W,f/B),h=s._x=(W-R/d)/2,N=s._y=(B-f/d)/2;if(0!==z.width&&0!==z.height||s.hasRetry||(b.callLater(s.iv,s,y),s.hasRetry=!0),(W!==F.clientWidth||B!==F.clientHeight)&&(o.setCanvas(F,W,B),J=1),o.isSameRect(S,s._scrollRect)||(s._scrollRect=S,J=1),J){var j=o.initContext(F),H=t.getDataModel().getBackground()||s._contentBackground,I=s._contentBorderColor,k=b.devicePixelRatio;j.clearRect(0,0,W*k,B*k),H&&o.fillRect(j,h*k,N*k,R/d*k,f/d*k,H),o.translateAndScale(j,-m/d+h,-G/d+N,1/d),t._42(j),j.restore(),I&&o.drawBorder(j,I,h*k,N*k,R/d*k,f/d*k)}e.background=s._maskBackground,e.left=h+(z.x-m)/d+Q,e.top=N+(z.y-G)/d+Q,e.width=z.width/d+Q,e.height=z.height/d+Q,s._redraw=null}else if(J){var j=o.initContext(F);j.clearRect(0,0,W,B),j.restore(),s._redraw=null}},center:function(L){var j=this,s=j.gv;if(s){var F=s._zoom,C=s._29I,d=j._rate,Q=j._scrollRect,l=b.getLogicalPoint(L,j._canvas),H=Q.x+(l.x-j._x)*d,c=Q.y+(l.y-j._y)*d;s.setTranslate((C.width/2-H)*F,(C.height/2-c)*F)}},handle_mousedown:function(s){this.handle_touchstart(s)},handleWindowMouseUp:function(S){this.handleWindowTouchEnd(S)},handleWindowMouseMove:function(p){this.handleWindowTouchMove(p)},handle_mousewheel:function(K){this.handleScroll(K,K.wheelDelta)},handle_DOMMouseScroll:function(O){2===O.axis&&this.handleScroll(O,-O.detail)},handleScroll:function(X,b){if(U(X),this.gv){var B=this.gv;b>0?B.scrollZoomIn():0>b&&B.scrollZoomOut()}},handle_touchstart:function(Z){if(U(Z),this.gv&&b.isLeftButton(Z)){var O=this,N=O.gv,A=L(Z);1===A?b.isDoubleClick(Z)&&N.isResettable()?N.reset():(O.center(Z),e(O,Z)):2===A&&(O._dist=V(Z),e(O,Z))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(U){if(this.gv){var i=this,s=i._dist,z=L(U);1===z?i.center(U):2===z&&s!=y&&i.gv.handlePinch(y,V(U),s)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);